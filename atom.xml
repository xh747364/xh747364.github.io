<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>谢欢的博客</title>
  <icon>https://www.gravatar.com/avatar/edb73c240e90ee161d5807249adc8176</icon>
  <subtitle>山有木兮卿有意，昨夜星辰恰似你</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="/"/>
  <updated>2019-12-25T14:28:44.729Z</updated>
  <id>/</id>
  
  <author>
    <name>谢欢</name>
    <email>xh747364@163.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Ant design pro of vue 踩坑记录</title>
    <link href="/2019/08/30/antDesignVue/"/>
    <id>/2019/08/30/antDesignVue/</id>
    <published>2019-08-30T14:02:28.000Z</published>
    <updated>2019-12-25T14:28:44.729Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>基于 Ant Design of Vue 实现的 Ant Design Vue Pro 版</p></blockquote><a id="more"></a><ul><li>官网 <a href="https://pro.loacg.com" target="_blank" rel="noopener">https://pro.loacg.com</a></li><li>Ant Design of Vue <a href="https://www.antdv.com/docs/vue/introduce-cn/" target="_blank" rel="noopener">https://www.antdv.com/docs/vue/introduce-cn/</a></li></ul><h1 id="引入echarts问题"><a href="#引入echarts问题" class="headerlink" title="引入echarts问题"></a>引入<a href="https://www.echartsjs.com/zh/index.html" target="_blank" rel="noopener">echarts</a>问题</h1><h2 id="按需引入"><a href="#按需引入" class="headerlink" title="按需引入"></a>按需引入</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">let echarts = require(<span class="string">'echarts/lib/echarts'</span>)</span><br><span class="line"><span class="comment">// 引入折线图、柱形图、饼图、漏斗图，散点图</span></span><br><span class="line"><span class="function"><span class="title">require</span><span class="params">(<span class="string">'echarts/lib/chart/line'</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">require</span><span class="params">(<span class="string">'echarts/lib/chart/bar'</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">require</span><span class="params">(<span class="string">'echarts/lib/chart/pie'</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">require</span><span class="params">(<span class="string">'echarts/lib/chart/funnel'</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">require</span><span class="params">(<span class="string">'echarts/lib/chart/scatter'</span>)</span></span></span><br><span class="line"><span class="comment">// 引入提示框和title组件，图例，地图</span></span><br><span class="line"><span class="function"><span class="title">require</span><span class="params">(<span class="string">'echarts/lib/component/tooltip'</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">require</span><span class="params">(<span class="string">'echarts/lib/component/title'</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">require</span><span class="params">(<span class="string">'echarts/lib/component/legend'</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">require</span><span class="params">(<span class="string">'echarts/lib/component/geo'</span>)</span></span></span><br><span class="line"><span class="comment">//图例翻译滚动</span></span><br><span class="line"><span class="comment">// require('echarts/lib/component/legendScroll')</span></span><br><span class="line"><span class="comment">//引入中国地图</span></span><br><span class="line">import china from <span class="string">'echarts/map/json/china.json'</span></span><br><span class="line">echarts.registerMap(<span class="string">'china'</span>, china)</span><br><span class="line"></span><br><span class="line">Vue<span class="selector-class">.prototype</span>.<span class="variable">$echarts</span> = echarts</span><br></pre></td></tr></table></figure><h2 id="ie浏览器第一次进入下不会缩放"><a href="#ie浏览器第一次进入下不会缩放" class="headerlink" title="ie浏览器第一次进入下不会缩放"></a>ie浏览器第一次进入下不会缩放</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fireEvent =<span class="function">(<span class="params">element,event</span>) =&gt;</span> &#123;  </span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.createEventObject)&#123;  </span><br><span class="line">    <span class="comment">// IE浏览器支持fireEvent方法  </span></span><br><span class="line">    <span class="keyword">var</span> evt = <span class="built_in">document</span>.createEventObject();  </span><br><span class="line">    <span class="keyword">return</span> element.fireEvent(<span class="string">'on'</span>+event,evt)  </span><br><span class="line">  &#125;  </span><br><span class="line">  <span class="keyword">else</span>&#123;  </span><br><span class="line">    <span class="comment">// 其他标准浏览器使用dispatchEvent方法  </span></span><br><span class="line">    <span class="keyword">var</span> evt = <span class="built_in">document</span>.createEvent( <span class="string">'HTMLEvents'</span> );  </span><br><span class="line">    evt.initEvent(event, <span class="literal">true</span>, <span class="literal">true</span>);  </span><br><span class="line">    <span class="keyword">return</span> !element.dispatchEvent(evt);  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  fireEvent(<span class="built_in">window</span>,<span class="string">'resize'</span>);</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.createEventObject)&#123;  </span><br><span class="line">    <span class="comment">// IE浏览器支持fireEvent方法  </span></span><br><span class="line">    <span class="keyword">var</span> evt = <span class="built_in">document</span>.createEventObject();  </span><br><span class="line">    <span class="built_in">window</span>.fireEvent(<span class="string">'onresize'</span>,evt)  </span><br><span class="line">  &#125;  </span><br><span class="line">  <span class="keyword">else</span>&#123;  </span><br><span class="line">    <span class="comment">// 其他标准浏览器使用dispatchEvent方法  </span></span><br><span class="line">    <span class="keyword">var</span> evt = <span class="built_in">document</span>.createEvent( <span class="string">'HTMLEvents'</span> );  </span><br><span class="line">    evt.initEvent(<span class="string">'resize'</span>, <span class="literal">true</span>, <span class="literal">true</span>);  </span><br><span class="line">    <span class="built_in">window</span>.dispatchEvent(evt);  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="number">10</span>)</span><br></pre></td></tr></table></figure><h2 id="把echarts封装为组件"><a href="#把echarts封装为组件" class="headerlink" title="把echarts封装为组件"></a>把echarts封装为组件</h2><ol><li>在 /src/components/Charts 下新建 EchartCom.vue 文件，内容如下，根据需求引入图表类型</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">"chartDom"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> echarts <span class="keyword">from</span> <span class="string">'echarts/lib/echarts'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> <span class="string">'echarts/lib/chart/bar'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> <span class="string">'echarts/lib/chart/line'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> <span class="string">'echarts/lib/chart/pie'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> <span class="string">'echarts/lib/component/legend'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> <span class="string">'echarts/lib/component/title'</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  props: &#123;</span><br><span class="line">    option: &#123;</span><br><span class="line"><span class="javascript">      type: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="keyword">default</span>: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    option: &#123;</span><br><span class="line">      handler (val) &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.chart.hideLoading()</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.chart.setOption(val)</span></span><br><span class="line">      &#125;,</span><br><span class="line"><span class="actionscript">      deep: <span class="literal">true</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted () &#123;</span><br><span class="line"><span class="actionscript">    <span class="keyword">this</span>.renderChart()</span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, () =&gt; &#123;</span></span><br><span class="line"><span class="javascript">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.resize()</span></span><br><span class="line">      &#125;, 100)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    resize () &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.chart.resize()</span></span><br><span class="line">    &#125;,</span><br><span class="line">    renderChart () &#123;</span><br><span class="line"><span class="actionscript">      <span class="comment">// console.log(echarts)</span></span></span><br><span class="line"><span class="actionscript">      <span class="comment">// console.log(this.option, '===================')</span></span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 基于准备好的dom，初始化echarts实例</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.chart = echarts.init(<span class="keyword">this</span>.$refs.chartDom)</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.chart.showLoading()</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.chart.setOption(<span class="keyword">this</span>.option)</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>修改 /src/components/index.js </li></ol><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 新增</span></span><br><span class="line"><span class="keyword">import</span> EchartCom <span class="keyword">from</span> <span class="string">'@/components/Charts/EchartCom'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">  EchartCom</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>引用该组件</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// html</span></span><br><span class="line">&lt;EchartCom <span class="class"><span class="keyword">class</span></span>=<span class="string">"chartLine"</span> :option=<span class="string">"option"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">EchartCom</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// script</span></span><br><span class="line"><span class="keyword">import</span> &#123; EchartCom &#125; <span class="keyword">from</span> <span class="string">'@/components'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    EchartCom</span><br><span class="line">  &#125;,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      option: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// style</span></span><br><span class="line">.chartLine&#123;</span><br><span class="line">  width: <span class="number">600</span>px;</span><br><span class="line">  height: <span class="number">300</span>px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="代理会自动加上-api-问题"><a href="#代理会自动加上-api-问题" class="headerlink" title="代理会自动加上 /api 问题"></a>代理会自动加上 /api 问题</h1><ol><li>修改 /src/utils/request.js</li></ol><figure class="highlight thrift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注释掉默认的代理</span></span><br><span class="line"><span class="keyword">const</span> <span class="class"><span class="keyword">service</span> = <span class="title">axios</span>.create(</span>&#123;</span><br><span class="line">  <span class="comment">// baseURL: '/api', </span></span><br><span class="line">  timeout: <span class="number">0</span> <span class="comment">// 请求超时时间</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="2"><li>然后在去vue.config.js中添加代理即可</li></ol><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">devServer</span>: &#123;</span><br><span class="line">  <span class="attribute">port</span>: <span class="number">8000</span>,</span><br><span class="line">  <span class="attribute">proxy</span>: &#123;</span><br><span class="line">    <span class="string">'/test'</span>: &#123;</span><br><span class="line">      <span class="attribute">target</span>: <span class="string">'http://192.168.3.1:8080/'</span>,</span><br><span class="line">      <span class="attribute">ws</span>: false,</span><br><span class="line">      <span class="attribute">changeOrigin</span>: true,</span><br><span class="line">      <span class="attribute">pathRewrite</span>: &#123;</span><br><span class="line">        <span class="string">'^/test'</span>: <span class="string">''</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="打包后文件过大"><a href="#打包后文件过大" class="headerlink" title="打包后文件过大"></a>打包后文件过大</h1><h2 id="关掉报错信息"><a href="#关掉报错信息" class="headerlink" title="关掉报错信息"></a>关掉报错信息</h2><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js 中</span></span><br><span class="line"><span class="string">productionSourceMap:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="开启gzip压缩"><a href="#开启gzip压缩" class="headerlink" title="开启gzip压缩"></a>开启gzip压缩</h2><p>安装 compression-webpack-plugin<br><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> compression-webpack-plugin</span><br></pre></td></tr></table></figure></p><p>修改 vue.config.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入compression-webpack-plugin</span></span><br><span class="line"><span class="keyword">const</span> CompressionWebpackPlugin = <span class="built_in">require</span>(<span class="string">'compression-webpack-plugin'</span>)</span><br><span class="line"><span class="comment">// 定义压缩文件类型</span></span><br><span class="line"><span class="keyword">const</span> productionGzipExtensions = [<span class="string">'js'</span>, <span class="string">'css'</span>]</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">configureWebpack: &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> CompressionWebpackPlugin(&#123;</span><br><span class="line">      filename: <span class="string">'[path].gz[query]'</span>,</span><br><span class="line">      algorithm: <span class="string">'gzip'</span>,</span><br><span class="line">      test: <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'\\.('</span> + productionGzipExtensions.join(<span class="string">'|'</span>) + <span class="string">')$'</span>),</span><br><span class="line">      threshold: <span class="number">10240</span>,</span><br><span class="line">      minRatio: <span class="number">0.8</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;基于 Ant Design of Vue 实现的 Ant Design Vue Pro 版&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="web前端" scheme="/categories/web%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="Vue" scheme="/tags/Vue/"/>
    
      <category term="ant design" scheme="/tags/ant-design/"/>
    
  </entry>
  
  <entry>
    <title>Vue 单元测试</title>
    <link href="/2019/08/22/log2/"/>
    <id>/2019/08/22/log2/</id>
    <published>2019-08-22T09:15:23.000Z</published>
    <updated>2019-09-12T05:36:21.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>vue 单元测试  </p></blockquote><a id="more"></a><h2 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev @vue/test-utils karma karma-chrome-launcher karma-mocha karma-sourcemap-loader karma-spec-reporter karma-webpack mocha</span><br></pre></td></tr></table></figure><h2 id="在package-json层创建karma-conf-js-内容如下"><a href="#在package-json层创建karma-conf-js-内容如下" class="headerlink" title="在package.json层创建karma.conf.js 内容如下"></a>在package.json层创建karma.conf.js 内容如下</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> webpackConfig =  <span class="built_in">require</span>(<span class="string">'@vue/cli-service/webpack.config.js'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;</span><br><span class="line">    config.set(&#123;</span><br><span class="line">        frameworks: [<span class="string">'mocha'</span>],</span><br><span class="line">        files: [</span><br><span class="line">            <span class="string">'tests/**/*.spec.js'</span>   <span class="comment">//tests目录下，所有.spce.js结尾的测试文件</span></span><br><span class="line">        ],</span><br><span class="line">        preprocessors: &#123;</span><br><span class="line">            <span class="string">'**/*.spec.js'</span>: [<span class="string">'webpack'</span>, <span class="string">'sourcemap'</span>]</span><br><span class="line">        &#125;,</span><br><span class="line">        webpack: webpackConfig,</span><br><span class="line">        reporters: [<span class="string">'spec'</span>],</span><br><span class="line">        browsers: [<span class="string">'ChromeHeadless'</span>]</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>package.json内增加script命令</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"test"</span>: <span class="string">"karma start"</span></span><br></pre></td></tr></table></figure><h2 id="引入断言模块chai应用"><a href="#引入断言模块chai应用" class="headerlink" title="引入断言模块chai应用"></a>引入断言模块chai应用</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//tests/unit 下创建 HellpWorld.spec.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> &#123; shallowMount &#125; <span class="keyword">from</span> <span class="string">"@vue/test-utils"</span>;</span><br><span class="line"><span class="keyword">import</span> HelloWorld <span class="keyword">from</span> <span class="string">"@/components/HelloWorld.vue"</span>;</span><br><span class="line"></span><br><span class="line">describe(<span class="string">"HelloWorld.vue"</span>, () =&gt; &#123;</span><br><span class="line">  it(<span class="string">"简单测试1 是否等于 true"</span>, () =&gt; &#123;</span><br><span class="line">    expect(<span class="number">1</span>).to.equal(<span class="literal">true</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/******************其他用法*********************/</span></span><br><span class="line">describe(<span class="string">'异步测试Callback'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  it(<span class="string">'Done用例'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">describe(<span class="string">'异步测试Callback'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  it(<span class="string">'Done用例'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">done</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      done()</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="comment">// promise</span></span><br><span class="line">describe(<span class="string">'异步测试Promise'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  it(<span class="string">'Promise用例'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      resolve(<span class="literal">true</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="comment">// async</span></span><br><span class="line">describe(<span class="string">'异步测试Async'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  it(<span class="string">'Async用例'</span>, <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>最后执行 npm run test<br>完结撒花❀❀❀</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;vue 单元测试  &lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="web前端" scheme="/categories/web%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="Vue" scheme="/tags/Vue/"/>
    
      <category term="单元测试" scheme="/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>落花有意随流水，流水无情恋落花</title>
    <link href="/2019/07/22/log1/"/>
    <id>/2019/07/22/log1/</id>
    <published>2019-07-22T07:39:44.000Z</published>
    <updated>2019-07-22T07:39:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>落花孤独地飘零，寻找着能陪她一生一世的伴侣。流水静静地流淌，等待着能与他相遇的红颜知己。</p><a id="more"></a><p>他们就这样相互找寻着，终于有一天，落花与流水一见钟情。落花仰慕流水的英俊潇洒，博大胸怀。流水欣赏落花的妩媚多姿，温柔体贴。他们彼此吸引，相互依恋，成为世间的一段佳话。</p><p>无奈，流水整日飘忽不定，居无定所。落花则早已厌倦了这种漂泊的生活，只盼能与爱人寻个安乐窝，从此幸福的相守一生。于是，他们有了第一次激烈的争吵。</p><p>落花：“你就不能为我停留一刻吗？”</p><p>流水：“这是我的天性，你叫我如何能改？你就不能随我一起游遍大江南北，岂不乐哉？”</p><p>落花：“可这并不是我想要的，我想要的是安定的生活啊。”</p><p>流水低头不语，沉思良久：“你变了，以前的你是多么的善解人意，温柔懂事，从不强迫我做任何事。你不是说过，我到哪，你就会随我到哪吗？”</p><p>落花愕然，抬头看着流水，流下了怨恨的泪水：“你说我变了，那你呢？你又何尝不是？以前的你，是多么的无微不至，关爱万分，就是我想要天上的星星，你也会摘给我。”</p><p>流水摇头：“我们都变了，变了。”</p><p>落花听了，哭的更伤心了。流水本想安慰她，却又忍住了，他知道，此刻，无论他说什么，落花也听不进去。落花见流水这般无情，任她如此伤心难过丝毫没有劝慰的意思，恨恨的说道：“既然我要的你给不了，那我们分手吧。“说罢，便拂袖而去。流水只能眼睁睁地看着她离开，没有去追。</p><p>几年以后，落花依旧孤独一人，她的容颜已经被岁月侵蚀，可在她的内心深处，仍然深深的爱着流水，回忆着流水曾给她的快乐，每每想起，嘴角都会露出一丝甜蜜的微笑。可她不能回头，当初选择伤痛离开，难道错了吗？</p><p>到底是谁的错？</p><p>或许他们都没有错，错就错在命运不该如此安排，让他们相遇，相爱，却不能相守。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;落花孤独地飘零，寻找着能陪她一生一世的伴侣。流水静静地流淌，等待着能与他相遇的红颜知己。&lt;/p&gt;
    
    </summary>
    
      <category term="随笔" scheme="/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="诗词" scheme="/tags/%E8%AF%97%E8%AF%8D/"/>
    
  </entry>
  
  <entry>
    <title>你好，世界！</title>
    <link href="/2019/07/20/HelloWord/"/>
    <id>/2019/07/20/HelloWord/</id>
    <published>2019-07-20T15:00:10.000Z</published>
    <updated>2019-07-20T15:00:10.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>博客开通啦！</p></blockquote><a id="more"></a><p><img src="/assets/blogImg/first.jpg" alt="服务器开小差了-_-!"> </p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;博客开通啦！&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="部署" scheme="/tags/%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>粘贴页脚</title>
    <link href="/2019/07/05/stickyFooter/"/>
    <id>/2019/07/05/stickyFooter/</id>
    <published>2019-07-05T06:36:27.000Z</published>
    <updated>2019-12-25T14:28:44.733Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>内容不足时，页脚固定在页面底部</p></blockquote><a id="more"></a><p>HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">header</span>&gt;</span>头部<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">footer</span>&gt;</span>页脚<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>CSS<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">header</span>&#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffff</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#333</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">main</span>&#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">footer</span>&#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffff</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#333</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>预览</p><p><img src="https://xhxiehuan.club/blog-photolist/blog_photos/2019-08-03_stickyFooter.png" alt="服务器开小差了-_-!"> </p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;内容不足时，页脚固定在页面底部&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="web前端" scheme="/categories/web%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="flex布局" scheme="/tags/flex%E5%B8%83%E5%B1%80/"/>
    
  </entry>
  
  <entry>
    <title>一些判断函数</title>
    <link href="/2019/07/04/someRegExp/"/>
    <id>/2019/07/04/someRegExp/</id>
    <published>2019-07-04T09:46:51.000Z</published>
    <updated>2019-11-05T11:11:45.902Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>各种判断函数</p></blockquote><a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 合法数字</span></span><br><span class="line"><span class="keyword">let</span> isNumber = <span class="function">(<span class="params">num</span>) =&gt;</span> <span class="regexp">/^[0-9]+.?[0-9]*/g</span>.test(num)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 手机号</span></span><br><span class="line"><span class="keyword">let</span> isPhone = <span class="function">(<span class="params">num</span>) =&gt;</span> <span class="regexp">/^[+]&#123;0,1&#125;(\d)&#123;1,3&#125;[ ]?([-]?((\d)|[ ])&#123;1,12&#125;)+$/</span>.test(num)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 邮箱</span></span><br><span class="line"><span class="keyword">let</span> isEmail = <span class="function">(<span class="params">email</span>) =&gt;</span> <span class="regexp">/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]&#123;2,4&#125;)$/</span>.test(email)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 身份证号</span></span><br><span class="line"><span class="keyword">let</span> isCardNo = <span class="function">(<span class="params">card</span>) =&gt;</span> <span class="regexp">/(^\d&#123;15&#125;$)|(^\d&#123;18&#125;$)|(^\d&#123;17&#125;(\d|X|x)$)/</span>.test(card)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 微信浏览器</span></span><br><span class="line"><span class="keyword">let</span> isWeChat = <span class="function"><span class="params">()</span> =&gt;</span> <span class="regexp">/MicroMessenger/i</span>.test(navigator.userAgent)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 微信开发者工具</span></span><br><span class="line"><span class="keyword">let</span> isWeChatDevTool = <span class="function"><span class="params">()</span> =&gt;</span> isWeChat() &amp;&amp; <span class="regexp">/wechatdevtools/i</span>.test(navigator.userAgent)</span><br><span class="line"></span><br><span class="line"><span class="comment">//支付宝浏览器</span></span><br><span class="line"><span class="keyword">let</span> isAliPay = <span class="function"><span class="params">()</span> =&gt;</span> <span class="regexp">/AlipayClient/i</span>.test(navigator.userAgent)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移动端</span></span><br><span class="line"><span class="keyword">let</span> isMobile = <span class="function"><span class="params">()</span> =&gt;</span> <span class="regexp">/(iPhone|iPad|iPod|iOS|Android)/i</span>.test(navigator.userAgent)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;各种判断函数&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="JavaScript工具函数" scheme="/categories/JavaScript%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/"/>
    
    
      <category term="工具" scheme="/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="JavaScript" scheme="/tags/JavaScript/"/>
    
      <category term="正则验证" scheme="/tags/%E6%AD%A3%E5%88%99%E9%AA%8C%E8%AF%81/"/>
    
  </entry>
  
  <entry>
    <title>世界很好,你也很好!</title>
    <link href="/2019/07/01/%E4%B8%96%E7%95%8C%E5%BE%88%E5%A5%BD%EF%BC%8C%E4%BD%A0%E4%B9%9F%E5%BE%88%E5%A5%BD/"/>
    <id>/2019/07/01/世界很好，你也很好/</id>
    <published>2019-07-01T06:48:00.000Z</published>
    <updated>2019-07-01T06:48:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>  努力, 奋斗,<br>  加油, 坚持! </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;  努力, 奋斗,&lt;br&gt;  加油, 坚持! &lt;/p&gt;

      
    
    </summary>
    
    
      <category term="部署" scheme="/tags/%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>回顾2018年</title>
    <link href="/2018/12/31/2018%E6%80%BB%E7%BB%93/"/>
    <id>/2018/12/31/2018总结/</id>
    <published>2018-12-31T15:00:10.000Z</published>
    <updated>2019-07-21T15:00:10.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>回顾2018年</p></blockquote><a id="more"></a><h1 id="学习的技术"><a href="#学习的技术" class="headerlink" title="学习的技术"></a>学习的技术</h1><ul><li><del>微信小程序</del></li><li><del>Vue-cli、Vue-router、webpack</del></li><li><del>node、express、koa、mysql</del></li></ul><h2 id="微信小程序"><a href="#微信小程序" class="headerlink" title="微信小程序"></a>微信小程序</h2><blockquote><p>因产品需求，自学了微信小程序，并且应用到实际项目中，美化原生picker抽屉弹层样式</p></blockquote><h2 id="Vue、Vue-router、webpack"><a href="#Vue、Vue-router、webpack" class="headerlink" title="Vue、Vue-router、webpack"></a>Vue、Vue-router、webpack</h2><blockquote><p>因项目需求，需要前后端分离，学习了vue2，及webpack项目构建工具 <a href="http://www.china-hanghua.com/mobile/index/" target="_blank" rel="noopener">线上项目</a></p></blockquote><h2 id="node、express、koa、mysql"><a href="#node、express、koa、mysql" class="headerlink" title="node、express、koa、mysql"></a>node、express、koa、mysql</h2><blockquote><p><del>学习的express，MySQL，搭建后台管理，及前台页面，i18n国际化</del> <a href="http://www.hbshimo.com/index?lg=zh" target="_blank" rel="noopener">线上项目</a></p></blockquote><hr><h1 id="2019规划"><a href="#2019规划" class="headerlink" title="2019规划"></a>2019规划</h1><p>&nbsp;</p><blockquote><p>依然在前端路上前行，既然选择了前端，便只顾HTML、JS</p></blockquote><ul><li><del>搭建一个博客</del></li><li>学习一个新的框架</li><li>考驾照</li></ul><p>其他的一些 <del><em>想起来再说</em></del> 就是没了(.=^・ェ・^=)</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;回顾2018年&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="随笔" scheme="/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="年终总结" scheme="/tags/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
</feed>
